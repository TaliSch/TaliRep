@{
    ViewBag.Title = "Create";
}

<link rel="shortcut icon" href="http://elrte.org/favicon.ico" />
<link rel="stylesheet" href="http://elrte.org/style/style.css"    type="text/css" media="screen" />
<link rel="stylesheet" href="http://elrte.org/release/elrte/css/smoothness/jquery-ui-1.8.13.custom.css" type="text/css" media="screen" /> 
<link rel="stylesheet" href="http://elrte.org/release/elrte/css/elrte.min.css"  type="text/css" media="screen" />
<link rel="stylesheet" href="http://elrte.org/release/elfinder/css/elfinder.css" type="text/css" media="screen" />
<script src="http://elrte.org/release/elrte/js/jquery-1.6.1.min.js"          type="text/javascript" charset="utf-8"></script>
<script src="http://elrte.org/style/jquery.backgroundPosition.js" type="text/javascript" charset="utf-8"></script>
<script src="http://elrte.org/release/elrte/js/jquery-ui-1.8.13.custom.min.js" type="text/javascript" charset="utf-8"></script>
<script src="http://elrte.org/release/elrte/js/elrte.min.js"                  type="text/javascript" charset="utf-8"></script>
<script src="http://elrte.org/release/elrte/js/i18n/elrte.en.js"          type="text/javascript" charset="utf-8"></script>
<script src="http://elrte.org/release/elfinder/js/elfinder.min.js"            type="text/javascript" charset="utf-8"></script>
<script src="http://elrte.org/release/elfinder/js/i18n/elfinder.en.js"    type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
    $().ready(function () {
        $("#createForm").submit(function (event) {
            event.preventDefault();
            var data = $("#editor").val();
            var name = $("#name").val();
            $.ajax({
                url: '/Editors/Create',
                type: 'POST',
                dataType: 'Json',
                //contentType: 'Json',
                data: { ID: "0", Data: data, Name: name },
                timeout:5000,

                success: function (data, textStatus, jqXHR) {
                    if (data) {
                        //alert('Send Succeeded');
                        //emptyFields();
                        //@Url.Action("Index");
                        //$("#editor").val('');
                        //$("#name").val('');
                        location.href = "/Editors/Index";
                    }
                    else
                        alert("Failed To Save");
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("Failed To Send");
                }
            });
        })
        //$("#editor").val("yyyy");
        //$('#elFinder a').hover(
        //    function () {
        //        $('#elFinder a').animate({
        //            'background-position': '0 -45px'
        //        }, 300);
        //    },
        //    function () {
        //        $('#elFinder a').delay(400).animate({
        //            'background-position': '0 0'
        //        }, 300);
        //    }
        //);

        //$('#elFinder a').delay(800).animate({ 'background-position': '0 0' }, 300);

        var opts = {
            absoluteURLs: false,
            cssClass: 'el-rte',
            lang: 'en',
            height: 420,
            toolbar: 'maxi',
            cssfiles: ['http://elrte.org/release/elrte/css/elrte-inner.css'],
            //fmOpen: function (callback) {
            //    //$('<div id="myelfinder" />').elfinder({
            //    //    url: 'http://elrte.org/connector',
            //    //    lang: 'en',
            //    //    dialog: { width: 900, modal: true, title: 'elFinder - file manager for web' },
            //    //    closeOnEditorCallback: true,
            //    //    editorCallback: callback
            //    //})
            //    if (typeof dialog != undefined) {
            //        // create new elFinder
            //        dialog = $('<div />').dialogelfinder({
            //            url: '../elfinder/php/connector.php'
            //        , commandsOptions: {
            //            getfile: {
            //                oncomplete: 'close' // close/hide elFinder
            //            }
            //        },
            //            getFileCallback: callback // pass callback to file manager
            //        });
            //    } else {
            //        // reopen elFinder
            //        dialog.dialogelfinder('open')
            //    }
            //}
            
        }
        $('#editor').elrte(opts);
    })
		</script>
@*<form method="post" action="http://elrte.org/release/shared/post.php">
				<div id="editor">
                    </div>
			</form>*@
<form method ="post" action="@Url.Action("Save")" id="createForm">
    <input type="text" id = "name" />
    <textarea id = "editor" name="editor"></textarea>

    @*@Html.TextBoxFor(postData => postData.Name, new { id = "name"});
    @Html.TextAreaFor(postData => postData.Data, new { id = "editor"});*@
@*<textarea id="editor" name="editor"></textarea>*@
@*<div id="myelFinder"></div>*@
    </form>


